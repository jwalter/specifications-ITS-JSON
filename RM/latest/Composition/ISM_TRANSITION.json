{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://www.openEHR.org/releases/ITS-JSON/Release-1.0.0/RM/latest/Composition/ISM_TRANSITION.json",
    "title": "ISM_TRANSITION",
    "description": "Model of a transition in the Instruction State Machine, caused by a careflow step. The attributes document the careflow step as well as the ISM transition. ",
    "$comments": "Defined in Composition IM, inherits from PATHABLE",
    "type": "object",
    "properties": {
        "current_state": {
            "description": "The ISM current state. Coded by openEHR terminology group Instruction states.",
            "$ref": "https://www.openEHR.org/releases/ITS-JSON/Release-1.0.0/RM/latest/Data_types/all.json#/definitions/DV_CODED_TEXT"
        },
        "transition": {
            "description": "The ISM transition which occurred to arrive in the current_state. Coded by openEHR terminology group  Instruction transitions.",
            "$ref": "https://www.openEHR.org/releases/ITS-JSON/Release-1.0.0/RM/latest/Data_types/all.json#/definitions/DV_CODED_TEXT"
        },
        "careflow_step": {
            "description": "The step in the careflow process which occurred as part of generating this action, e.g.  dispense ,  start_administration. This attribute represents the clinical  label for the activity, as  opposed to current_state which represents  the state machine (ISM)  computable form. Defined in archetype.",
            "$ref": "https://www.openEHR.org/releases/ITS-JSON/Release-1.0.0/RM/latest/Data_types/all.json#/definitions/DV_CODED_TEXT"
        },
        "reason": {
            "description": "Optional possibility of adding one or more reasons for this careflow step having been taken. Multiple reasons may occur in medication management for example.",
            "type": "array",
            "items": {
                "$ref": "https://www.openEHR.org/releases/ITS-JSON/Release-1.0.0/RM/latest/Data_types/all.json#/definitions/DV_TEXT"
            }
        }
    },
    "required": [
        "current_state"
    ],
    "$inherits": [
        "https://www.openEHR.org/releases/ITS-JSON/Release-1.0.0/RM/latest/Common/all.json#/definitions/PATHABLE"
    ],
    "$functions": {
        "parent": {
            "description": "Parent of this node in a compositional hierarchy. \n"
        },
        "item_at_path": {
            "description": "The item at a path (relative to this item); only valid for unique paths, i.e. paths that resolve to a single item. "
        },
        "items_at_path": {
            "description": "List of items corresponding to a non-unique path."
        },
        "path_exists": {
            "description": "True if the path exists in the data with respect to the current item. "
        },
        "path_unique": {
            "description": "True if the path corresponds to a single item in the data. "
        },
        "path_of_item": {
            "description": "The path to an item relative to the root of this archetyped structure."
        }
    },
    "$invariants": {
        "Pre": {
            "description": "path_exists (a_path)"
        },
        "Current_state_valid": {
            "description": "terminology (Terminology_id_openehr).has_code_for_group_id (Group_id_instruction_states, current_state.defining_code)"
        },
        "Transition_valid": {
            "description": "transition /= Void implies terminology (Terminology_id_openehr).\nhas_code_for_group_id (Group_id_instruction_transitions, transition.defining_code)"
        }
    }
}